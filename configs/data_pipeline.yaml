# ============================================
# Data Processing Pipeline Configuration
# CIC-IDS-2017
# ============================================

# Paths
paths:
  raw_data: "data/raw/CICIDS-2017/TrafficLabelling"
  interim_data: "data/interim"
  processed_data: "data/processed"
  reports: "reports"
  artifacts: "artifacts"

# Ingestion settings
ingestion:
  encoding: "utf-8"
  drop_columns:
    - "Flow ID"
    - "Source IP"
    - "Destination IP"
    - "Timestamp"
  target_column: "Label"

# Cleaning settings
cleaning:
  remove_empty_labels: true
  inf_replacement: "nan"
  nan_strategy: "median"
  remove_duplicates: true
  clip_outliers: true
  clip_lower_percentile: 0.001
  clip_upper_percentile: 0.999

# Label mapping
labels:
  binary_mapping:
    "BENIGN": 0
    "default": 1
  multiclass_mapping:
    "BENIGN": 0
    "FTP-Patator": 1
    "SSH-Patator": 2
    "DoS slowloris": 3
    "DoS Slowhttptest": 4
    "DoS Hulk": 5
    "DoS GoldenEye": 6
    "Heartbleed": 7
    "Web Attack – Brute Force": 8
    "Web Attack – XSS": 9
    "Web Attack – Sql Injection": 10
    "Infiltration": 11
    "Bot": 12
    "PortScan": 13
    "DDoS": 14

# Preprocessing
preprocessing:
  scaler: "robust"
  save_preprocessor: true

# ============================================
# UPDATED: Stratified Random Split
# ============================================
splitting:
  # Strategy: "stratified" (recommended) or "temporal"
  strategy: "stratified"
  # Split sizes
  test_size: 0.15
  val_size: 0.15
  # Random seed for reproducibility
  random_state: 42
  # Stratify by the binary class
  stratify: true
  stratify_column: "label_binary"
  # Temporal split (only if strategy: temporal)
  temporal_mapping:
    train:
      - "Monday"
      - "Tuesday"
      - "Wednesday"
    val:
      - "Thursday"
    test:
      - "Friday"

# EDA
eda:
  max_features_corr: 30
  top_features: 20
  sample_size: 100000
  # Disable noisy kaleido logs
  suppress_kaleido_logs: true

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(levelname)s - %(message)s"
